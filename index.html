<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>Bulletproof Validation</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=792, user-scalable=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<link rel="stylesheet" href="shower/themes/ribbon/styles/screen.css">
	<link rel="stylesheet" href="shower/themes/ribbon/styles/screen.css">
	<link rel="stylesheet" href="build/custom.css">
</head>
<body class="list">
	<header class="caption">
		<h1>Bulletproof Validation</h1>
		<p>About the fact that all are silent</p>
	</header>
	<section class="slide cover" id="cover"><div class="cover-wrapper">
		<i class="mjs-logo"></i>
		<h2>Bulletproof Validation</h2>
		<p class="description">About the fact that all are silent</p>
		<div class="credits">
			<div class="credits__name">Anton Kuznetsov</div>
			<div class="credits__date">11/26/2015</div>
		</div>
	</div></section>
	<section class="slide"><div>
		<h2>About me</h2>
		<img src="pictures/isnifer.jpg" alt="Anton Kuznetsov" class="photo">
		<ul>
			<li>Anton Kuznetsov</li>
			<li>Front-end Developer</li>
			<li>5+ years</li>
			<li>Action Digital</li>
			<li>Moscow, Russia</li>
		</ul>
	</div></section>
	<section class="slide shout"><div>
		<h2>Hype</h2>
	</div></section>
	<section class="slide"><div>
		<h2>What do I want?</h2>
		<ul>
			<li>Strong desire to move from Angular to React</li>
			<li>Need to transparent reuse current codebase</li>
		</ul>
	</div></section>
	<section class="slide"><div>
		<h2>What should I to do?</h2>
		<ol>
			<li>Find equivalent to the current code solutions</li>
			<li>Write my own solution, if this is not</li>
			<li>Prepare presentation</li>
			<li>Create example for this solution</li>
			<li>Convince to be on light side of the Force</li>
		</ol>
	</div></section>
	<section class="slide cover yoda"><div>
	</div></section>
	<section class="slide cover"><div>
		<img src="pictures/jackie-chan.png" />
		<div class="forms">
			<span class="forms__text">Forms</span>
		</div>
	</div></section>
	<section class="slide"><div>
		<h2>What did I expect?</h2>
		<strong>Angular approach:</strong>
		<ul>
			<li>Each field has independent validator</li>
			<li>Form has 3 flags: isValid, isInvalid, isValidating</li>
			<li>Form knows what fields are invalid</li>
			<li>Form has API to manage validation (auto or manual)</li>
		</ul>
	</div></section>
	<section class="slide"><div>
		<h2>What did I want?</h2>
		<strong>The simplest API</strong>
		<pre>
			<code>{</code>
			<code>	isValid: <mark class="bool">false</mark>,</code>
			<code>	isInvalid: <mark class="bool">true</mark>,</code>
			<code>	isValidating: <mark class="bool">false</mark>,</code>
			<code>	invalidFields: [<mark class="string">'username'</mark>]</code>
			<code>}</code>
		</pre>
	</div></section>
	<section class="slide"><div>
		<h2>Existing Solutions</h2>
		<ul>
			<li>
				<a href="https://github.com/insin/newforms">
					insin/newforms
				</a>
			</li>
			<li>
				<a href="https://github.com/prometheusresearch/react-forms">
					prometheusresearch/react-forms
				</a>
			</li>
			<li>
				<a href="https://github.com/christianalfoni/formsy-react">
					christianalfoni/formsy-react
				</a>
			</li>
			<li>
				<a href="https://github.com/gcanti/tcomb-form">
					gcanti/tcomb-form
				</a>
			</li>
		</ul>
	</div></section>
	<section class="slide"><div>
		<strong>Benefits:</strong>
		<ul>
			<li>Possibility to override predefined UI-components </li>
			<li>Predefined data types (String, Number, Boolean)</li>
		</ul>
		<strong>Drawbacks:</strong>
		<ul>
			<li>Schema-validation</li>
			<li>Mixins</li>
			<li>Long long long long loooooong documentation</li>
		</ul>
	</div></section>
	<section class="slide shout"><div>
		<h2><a href="https://github.com/deepsweet/valya">Valya</a></h2>
	</div></section>
	<section class="slide"><div>
		<h2>Create Validator</h2>
		<pre>
			<code><mark class="keyword">import</mark> React, { Component } from <mark class="string">'react'</mark>;</code>
			<code><mark class="keyword">import</mark> <mark>Valya</mark> from <mark class="string">'valya'</mark>;</code>
			<code> </code>
			<code><mark>@Valya</mark></code>
			<code><mark class="keyword">class</mark> <mark class="bool">Validator</mark> <mark class="keyword">extends</mark> <mark class="bool">Component</mark> {</code>
			<code><mark class="comment">// ...</mark></code>
			<code>}</code>
		</pre>
	</div></section>
	<section class="slide"><div>
		<h2>Rendering Error</h2>
		<pre>
			<code>renderError() {</code>
			<code>	<mark class="keyword">if</mark> (!<mark class="var">this</mark>.props.enabled <mark class="keyword">||</mark> <mark class="var">this</mark>.props.isValid) {</code>
			<code>		<mark class="keyword">return</mark> <mark class="bool">null</mark>;</code>
			<code>	}</code>
			<code>	<mark class="keyword">return</mark> (</code>
			<code>		&lt;span className=<mark class="string">"validator__error"</mark> key=<mark class="string">"error"</mark>&gt;</code>
			<code>			<mark>{<mark class="var">this</mark>.props.validationErrorMessage}</mark></code>
			<code>		&lt;/span&gt;</code>
			<code>	);</code>
			<code>}</code>
		</pre>
	</div></section>
	<section class="slide"><div>
		<h2>Rendering Validator</h2>
		<pre>
			<code>render () {</code>
		    <code>    <mark class="keyword">return</mark> (</code>
		    <code>        &lt;span className=<mark class="string">"validator"</mark>&gt;</code>
		    <code>            &lt;span className=<mark class="string">"validator__target"</mark>&gt;</code>
		    <code>                <mark>{<mark class="var">this</mark>.props.children}</mark></code>
		    <code>            &lt;/span&gt;</code>
		    <code>            <mark>{<mark class="var">this</mark>.renderError()}</mark></code>
		    <code>        &lt;/span&gt;</code>
		    <code>    );</code>
		    <code>}</code>
		</pre>
	</div></section>
	<section class="slide"><div>
		<h2>Usage: Props</h2>
		<pre>
			<code><mark class="keyword">&lt;</mark><mark class="bool">Validator</mark></code>
	        <code>	<mark>value</mark><mark class="keyword">=</mark>{<mark class="var">this</mark>.state.value}</code>
	        <code>	<mark>validators</mark><mark class="keyword">=</mark>{ <mark class="comment">// ...</mark> }</code>
	        <code>	onEnd={(isValid, message) <mark class="keyword">=></mark> {</code>
	        <code>		console.log(<mark class="string">'validation end:'</mark>, isValid, message);</code>
	        <code>	}}<mark class="keyword">&gt;</mark></code>
	        <code>	<mark class="keyword">&lt;</mark><mark class="bool">input</mark> type=<mark class="string">"text"</mark> <mark>value</mark>={<mark class="var">this</mark>.state.value} </code>
	        <code>		onChange={e => <mark class="var">this</mark>.setState({value: e.target.value})} /<mark class="keyword">&gt;</mark></code>
	        <code><mark class="keyword">&lt;</mark>/<mark class="bool">Validator</mark><mark class="keyword">&gt;</mark>
		</pre>
	</div></section>
	<section class="slide"><div>
		<h2>Usage: Validators</h2>
		<pre>
	        <code>[{</code>
	        <code>	validator(value, params) {</code>
	        <code>		<mark class="keyword">if</mark> (value) <mark class="keyword">return</mark> <mark class="bool">Promise</mark>.resolve();</code>
	        <code> </code>
	        <code>		<mark class="keyword">return</mark> <mark class="bool">Promise</mark>.reject(params.message);</code>
	        <code>	},</code>
	        <code>	params: {</code>
	        <code>		message: <mark class="string">'Field is required'</mark></code>
	        <code>	}</code>
	        <code>}]</code>
		</pre>
	</div></section>
	<section class="slide"><div>
		<h2>What did I want?</h2>
		<strong>Angular approach:</strong>
		<ul>
			<li><s>Each field has independent validator</s></li>
			<li>Form has 3 flags: isValid, isInvalid, isValidating</li>
			<li>Form knows what fields are invalid</li>
			<li>Form has API to manage validation (auto or manual)</li>
		</ul>
	</div></section>
	<section class="slide shout"><div>
		<h2><a href="https://github.com/isnifer/foma">Foma</a></h2>
	</div></section>
	<section class="slide"><div>
		<h2>Foma Usage</h2>
		<pre>
			<code><mark class="keyword">import</mark> React, { Component } from <mark class="string">'react'</mark>;</code>
			<code><mark class="keyword">import</mark> <mark>Valya</mark> from <mark class="string">'valya'</mark>;</code>
			<code><mark class="keyword">import</mark> <mark>Foma</mark> from <mark class="string">'foma'</mark>;</code>
			<code> </code>
			<code><mark>@Foma</mark></code>
			<code><mark class="keyword">class</mark> <mark class="bool">FormDemo</mark> <mark class="keyword">extends</mark> <mark class="bool">Component</mark> {</code>
			<code>	<mark class="comment">// Write your own form as you want</mark></code>
			<code>	<mark class="comment">// Use Valya</mark></code>
			<code>}</code>
		</pre>
	</div></section>
	<section class="slide"><div>
		<h2>Foma API (WIP)</h2>
		<span><strong>FormDemo</strong> got some "special" props:</span>
		<ul>
			<li>{Boolean} isValid</li>
			<li>{Boolean} isInvalid</li>
			<li>{Boolean} isValidating</li>
            <li>{Array} invalidFields</li>
		</ul>
	</div></section>
	<section class="slide shout"><div>
		<h2><a href="https://isnifer.github.io/foma/">Demo</a></h2>
	</div></section>
	<section class="slide"><div>
		<h2>What did I want?</h2>
		<strong>Angular approach:</strong>
		<ul>
			<li><s>Form has 3 flags: isValid, isInvalid, isValidating</s></li>
			<li><s>Each field has independent validator</s></li>
			<li><s>Form knows what fields are invalid</s></li>
			<li><s>Form has API to manage validation (auto or manual)</s></li>
		</ul>
	</div></section>
	<section class="slide"><div>
		<h2>Thank you! Questions?</h2>
		<strong>Find @iSnifer on social:</strong>
		<ul>
			<li><a href="https://twitter.com/isnifer">twitter.com/isnifer</a></li>
			<li><a href="https://github.com/isnifer">github.com/isnifer</a></li>
			<li><a href="https://telegram.me/isnifer">telegram.me/isnifer</a></li>
			<li>isnifer at skype</li>
		</ul>
		<h2>More info: <a href="http://j.mp/bv-11-2015">j.mp/bv-11-2015</a></h2>
	</div></section>
	<section class="slide shout"><div>
		<h2><a href="https://github.com/isnifer/valya-examples">Demo examples</a></h2>
	</div></section>
	<div class="progress"><div></div></div>
	<script src="shower/shower.min.js"></script>
	<!-- Copyright © 2015 Anton Kuznetsov, Action Digital -->
</body>
</html>
